<!DOCTYPE html>
<html>

<head>
  <title>AvatarifySchool</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <meta charset="utf-8">
  <meta
    content="width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0, user-scalable=no, interactive-widget=resizes-content"
    name="viewport">
  <link rel="icon" type="image/png" href="favicon.png">

  <style>
    html {
      width: 100%;
      height: 100%;
      height: -webkit-fill-available;
      font-size: 14px;
    }

    #main {
      width: 90% !important;
      height: 80% !important;
      margin-top: 40px;
      padding-bottom: 20px;
    }

    #right {
      display: none;
    }

    #change {
      margin-top: 40px;
    }

    /* styline avatart,backtory */
    #sidebar {
      float: right;
      height: auto;
      width: 30%;
      background-color: rgba(224, 224, 224, 0.98);
      margin-top: 8px;
      padding-bottom: 20px;
      padding-left: -100px;
      background-color: #D1D6DC;
    }

    #data {
      padding: 10px;
      margin-top: 10px;
      margin-left: 39%;
      background-color: #007bff;
      color: #f8f9fa;
      border: #007bff;
    }

    li {
      margin: 20px;

    }

    button {
      font-size: 100%;
      font-weight: bold;
    }

    /* Color themes */
    :root,
    .theme-dark {
      --colorBody: #88ccff;
      --colorBackground: #202020;
      --colorPanel: rgba(32, 32, 32, 0.98);
      --colorBorderPassive: rgba(136, 204, 255, 0.6);
      --colorBorderActive: #88ccff;
      --colorUserText: #88ccff;
      --colorSystemText: #cc77ff;
      --colorToolbarPassive: rgba(136, 204, 255, 0.6);
      --colorToolbarPassive2: rgba(136, 204, 255, 0.3);
      --colorToolbarActive: #88ccff;
      --widthLabel: 5rem;
      --colorGlow: #88ccff;
    }

    .theme-light {
      --colorBody: #505050;
      --colorBackground: #f0f0f0;
      --colorPanel: rgba(224, 224, 224, 0.98);
      --colorBorderPassive: #d0d0d0;
      --colorBorderActive: #d0d0d0;
      --colorUserText: #404444;
      --colorSystemText: #678fb9;
      --colorToolbarPassive: rgba(80, 80, 80, 0.75);
      --colorToolbarPassive2: rgba(80, 80, 80, 0.5);
      --colorToolbarActive: #606666;
      --widthLabel: 5rem;
    }

    body {
      width: 100%;
      height: 100%;
      min-height: 100vh;
      min-height: -webkit-fill-available;
      margin: 0;
      padding: 0;
      background-color: var(--colorBackground);
      color: var(--colorBody);
      /* overflow: hidden; */
      text-align: left;
      touch-action: manipulation;
      font-family: "SansRegular", sans-serif;
      font-size: 1.4rem;
      line-height: 1.4rem;
      scrollbar-color: var(--colorToolbarPassive) transparent;
      scrollbar-width: 20px;
      background-image: url(./views/sky.jpg);
      background-position: center;
      background-size: cover;
    }

    ::-webkit-scrollbar {
      width: 20px;
      height: 20px;
    }

    ::-webkit-scrollbar-track {
      background: linear-gradient(to right, transparent,
          transparent 9px,
          var(--colorToolbarPassive) 9px,
          var(--colorToolbarPassive) 11px,
          transparent 11px);
    }

    ::-webkit-scrollbar-thumb {
      background-color: var(--colorPanel);
      border-radius: 10px;
      border: 2px solid var(--colorToolbarPassive);
    }

    /* input[type="range"] {
    position: relative; width: 180px; height: 0.8rem; line-height: 2rem;
    -webkit-appearance: none; appearance: none; margin-top: 0.6rem;
    cursor: pointer; pointer-events: auto;
    background: repeating-linear-gradient(
      to right, var(--colorToolbarPassive),
      var(--colorToolbarPassive) 2px,
      transparent 2px,
      transparent 44.5px
    );
  } */
    /* input[type="range"]::-webkit-slider-runnable-track {
    background: var(--colorToolbarPassive); height: 2px;
  } */
    /* input[type="range"]::-moz-range-track {
    background: var(--colorToolbarPassive); height: 2px;
  } */
    /* input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; appearance: none;
    background: var(--colorToolbarActive);
    margin-top: -0.6rem; height: 1.4rem; width: 0.8rem; border-radius: 0.1rem;
  } */
    /* input[type="range"]::-moz-range-thumb {
    border: none; background-color: var(--colorToolbarActive); height: 1.2rem;
    width: 0.8rem; border-radius: 0.1rem;
  } */
    /* input[type="range"]:focus { outline: none; }
  input[type="range"]:focus::-webkit-slider-thumb { outline: none; }
  input[type="range"]:focus::-moz-range-thumb { outline: none; } */

    /* input[type="text"] {
    flex: 1; background-color: transparent; color: var(--colorUserText);
    border: 0; outline: none; line-height: 2rem; font-family: "SansRegular";
    font-size: 1.4rem; cursor: pointer; pointer-events: auto; margin: 0;
    padding: 0 6px;
  } */
    /* input[type="text"]::placeholder {
    color: var(--colorUserText); opacity: 0.3;
  } */

    /* Pages */
    .pages {
      position: absolute;
      top: 18px;
      left: 30px;
      right: 30px;
      bottom: 10px;
      display: flex;
      flex-direction: column;
      row-gap: 6px;
    }

    .row {
      display: flex;
      row-gap: 0;
      column-gap: 8px;
    }

    .column {
      flex: 1;
      display: flex;
      flex-direction: column;
      row-gap: 2px;
    }

    .page {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      overflow-x: hidden;
      min-height: 0;
      margin: 8px 0 8px 0;
      padding-right: 16px;
    }

    .rowWrap {
      display: flex;
      row-gap: 2px;
      column-gap: 8px;
      flex-wrap: wrap;
    }

    .vspace {
      flex-shrink: 0;
      height: 2rem;
    }

    .vbar {
      height: 1px;
      background-color: var(--colorToolbarPassive2);
      flex-shrink: 0;
      margin: 1rem 0 1rem 0;
    }

    .fill,
    .filler {
      flex-shrink: 0;
      flex-grow: 1;
      flex-basis: 0;
      min-width: 0;
    }

    .filler {
      visibility: hidden;
      pointer-events: none;
    }

    .command,
    .text {
      display: inline-flex;
      height: calc(2rem + 2px);
      font-size: 1.4rem;
      line-height: calc(2rem + 2px);
      padding: 0 6px;
      gap: 12px;
      vertical-align: middle;
      text-align: left;
      font-family: "SansRegularCondensed";
      color: var(--colorToolbarPassive);
      white-space: nowrap;
      overflow: hidden;
    }

    .command,
    .text {
      font-family: "SansRegularCondensed";
      color: var(--colorToolbarPassive);
    }

    .command {
      cursor: pointer;
      pointer-events: auto;
    }

    .command>svg,
    .text>svg {
      height: 2rem;
      width: 2rem;
      padding: 1px 0;
      min-height: 2rem;
      min-width: 2rem;
    }

    .label {
      width: var(--widthLabel);
      flex-shrink: 0;
      color: var(--colorToolbarPassive2);
    }

    .border {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: transparent;
      border-width: 3px;
      border-style: solid;
      border-color: var(--colorBorderActive);
      pointer-events: none;
      border-radius: inherit;
    }

    .glow {
      box-shadow: 0 0 25px 5px var(--colorGlow);
    }

    .theme-light .glow {
      box-shadow: none;
    }

    /* Main */
    #main {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: transparent;
    }

    /* Left panel */
    #left {
      position: absolute;
      margin: 4px;
      pointer-events: none;
      background-color: var(--colorPanel);
    }

    #avatar,
    #view {
      background-image: url(views/class.jpg);
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center;
      position: absolute;
      opacity: 0;
      top: 0;
      left: 0;
      right: 0;
      /* bottom: 35%; */
      pointer-events: auto;
      overflow: hidden;
      border-radius: inherit;
      width: 45vw;
      border: solid 3px;
      box-shadow: 0px 5px 5px;
    }

    #view {
      background-image: none;
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
    }

    #video {
      position: absolute;
      height: 100%;
      width: 100%;
      object-position: center center;
      object-fit: cover;
    }

    /* Loading */
    #loading {
      display: block;
      position: absolute;
      top: 6px;
      left: 6px;
      width: 300px;
      height: 30px;
      pointer-events: none;
      font-size: 1rem;
      background-color: transparent;
    }

    #loading-back,
    #loading-top {
      display: block;
      position: absolute;
      top: 10px;
      left: 20px;
      bottom: 10px;
      width: 95px;
    }

    #loading-back {
      background: repeating-linear-gradient(to right, var(--colorToolbarPassive2),
          var(--colorToolbarPassive) 5px,
          transparent 5px,
          transparent 10px);
    }

    #loading-top {
      clip-path: inset(0 100% 0 0);
      background: repeating-linear-gradient(to right, var(--colorBody),
          var(--colorBody) 5px,
          transparent 5px,
          transparent 10px);
    }

    #loading-value {
      display: block;
      position: absolute;
      top: 0;
      left: 125px;
      bottom: 0;
      right: 0;
      line-height: 30px;
      text-align: left;
      font-size: 1.4rem;
      font-family: "SansRegularCondensed";
    }


    /* Right panel */
    #right {
      position: absolute;
      margin: 4px;
      background-color: var(--colorPanel);
    }

    #right .border {
      border-color: var(--colorBorderPassive);
    }

    .session {
      display: none;
      width: 100%;
    }

    .session.selected {
      display: block;
    }

    .message {
      position: relative;
      display: block;
      width: 50%;
      min-height: 2rem;
    }

    .message * {
      text-align: left;
      font-size: 1.4rem;
      line-height: 2rem;
    }

    .message>* {
      display: block;
      padding: 0 calc(6rem + 8px) 0 calc(4rem + 4px);
      color: var(--colorSystemText);
      z-index: 10;
    }

    .message ul,
    .message ol {
      margin: 0 0 0 2rem;
    }

    .message.user>* {
      color: var(--colorUserText);
    }

    .message>.toolbar-left {
      position: absolute;
      left: 0;
      bottom: 0;
      padding: 0;
      display: flex;
      row-gap: 0;
      column-gap: 4px;
    }

    .message>.toolbar-right {
      position: absolute;
      right: 0;
      bottom: 0;
      padding: 0;
      display: flex;
      row-gap: 0;
      column-gap: 4px;
    }

    #directory div:first-child div[data-entry-move="up"] {
      visibility: hidden;
    }

    #directory div:last-child div[data-entry-move="down"] {
      visibility: hidden;
    }

    #right textarea {
      flex: 1;
      min-height: 2rem;
      margin: auto;
      background: transparent;
      border: 0;
      font-family: "SansRegular";
      font-size: 1.4rem;
      padding: 0 6px;
      line-height: 2rem;
      resize: none;
      outline: none;
      color: var(--colorUserText);
      pointer-events: auto;
    }

    #right textarea[data-item="ai-openai-ai1"],
    #right textarea[data-item="ai-openai-ai2"],
    #right textarea[data-item="ai-gemini-ai1"],
    #right textarea[data-item="ai-gemini-ai2"] {
      color: var(--colorSystemText);
    }

    #right textarea::placeholder {
      color: inherit;
      opacity: 0.3;
    }

    .emoji {
      cursor: pointer;
      pointer-events: auto;
    }

    #morphs .label {
      width: calc(2.5 * var(--widthLabel));
    }

    /* Bottom panel */
    #bottom {
      position: absolute;
      left: 10px;
      width: 45vw;
      margin: 4px;
      padding: 25px 25px 60px 25px;
      /* background-color: var(--colorPanel); */
      background-color: #D1D6DC;
    }

    #bottom .border {
      border-color: var(--colorBorderPassive);
    }

    #bottom textarea {
      flex: 1;
      min-height: 2rem;
      margin: 0;
      background: transparent;
      border: 0;
      font-family: "SansRegular";
      font-size: 1.4rem;
      line-height: 2rem;
      resize: none;
      outline: none;
      color: var(--colorUserText);
      pointer-events: auto;
      box-sizing: border-box;
    }

    #bottom textarea::placeholder {
      color: var(--colorUserText);
      opacity: 0.3;
    }

    #flag,
    #score {
      color: var(--colorToolbarPassive2);
    }

    [data-image-type^='video/']:before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' width='16' height='16' viewBox='-10 -10 58 58'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M43,42H5c-2.209,0-4-1.791-4-4V10c0-2.209,1.791-4,4-4h38c2.209,0,4,1.791,4,4v28 C47,40.209,45.209,42,43,42z M12,8H5c-1.104,0-2,0.896-2,2v2h9V8z M23,8h-9v4h9V8z M34,8h-9v4h9V8z M45,10c0-1.104-0.896-2-2-2h-7v4 h9l0,0V10z M45,14L45,14H3v20h42l0,0V14z M45,36L45,36h-9v4h-2v-4h-9v4h-2v-4h-9v4h-2v-4H3v2c0,1.104,0.896,2,2,2h38 c1.104,0,2-0.896,2-2V36z M21.621,29.765C21.449,29.904,21.238,30,21,30c-0.553,0-1-0.447-1-1V19c0-0.552,0.447-1,1-1 c0.213,0,0.4,0.082,0.563,0.196l7.771,4.872C29.72,23.205,30,23.566,30,24c0,0.325-0.165,0.601-0.405,0.783L21.621,29.765z' fill='gray'%3E%3C/path%3E%3C/svg%3E");
      margin-right: 4px;
    }

    /* Misc */
    .text.selected,
    .command.selected,
    .screen:active,
    .command:active,
    .range:active,
    .emoji.selected,
    .emoji:active {
      color: var(--colorToolbarActive);
      filter: drop-shadow(0 0 8px var(--colorGlow));
    }

    .theme-light .text.selected,
    .theme-light .command.selected,
    .theme-light .screen:active,
    .theme-light .command:active,
    .theme-light .range:active,
    .theme-light .emoji.selected,
    .theme-light .emoji:active {
      background-color: var(--colorToolbarActive);
      color: var(--colorPanel);
      filter: none;
      border-radius: 6px;
    }

    .grayed {
      opacity: 0.3;
    }

    .noselect {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-user-select: none;
    }

    .nodrag {
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      -ms-user-drag: none;
    }

    .hidden {
      display: none;
    }

    .starttransparent {
      opacity: 0;
    }

    /* blinking */
    @-webkit-keyframes blinking {
      to {
        visibility: hidden
      }
    }

    @keyframes blinking {
      to {
        visibility: hidden
      }
    }

    .blink>:not(div):not(ol):not(ul):not(pre):last-child:after,
    .blink>ol:last-child li:last-child:after,
    .blink>pre:last-child code:after,
    .blink>ul:last-child li:last-child:after {
      -webkit-animation: blinking 1s steps(5, start) infinite;
      animation: blinking 1s steps(5, start) infinite;
      content: "▋";
      margin-left: .25rem;
      vertical-align: baseline;
      white-space: nowrap;
    }


    /* Fonts */
    @font-face {
      font-family: "SansRegular";
      src: url("./fonts/FiraSansCondensed-Regular.ttf") format('truetype');
    }

    @font-face {
      font-family: "SansItalic";
      src: url("./fonts/FiraSansCondensed-Italic.ttf") format('truetype');
    }

    @font-face {
      font-family: "SansBold";
      src: url("./fonts/FiraSansCondensed-Bold.ttf") format('truetype');
    }

    @font-face {
      font-family: "SansBoldItalic";
      src: url("./fonts/FiraSansCondensed-BoldItalic.ttf") format('truetype');
    }

    @font-face {
      font-family: "SansRegularCondensed";
      src: url("./fonts/FiraSansExtraCondensed-Regular.ttf") format('truetype');
    }

    @font-face {
      font-family: "SansBoldCondensed";
      src: url("./fonts/FiraSansExtraCondensed-Bold.ttf") format('truetype');
    }

    /* Layouts */
    #main.ratio-wide {
      width: min(96vw, 192vh, 1400px);
      height: min(48vw, 96vh, 700px);
    }

    /* 1:2 */
    #main.ratio-normal {
      width: min(96vw, 128vh, 1040px);
      height: min(72vw, 96vh, 780px);
    }

    /* 3:4 */
    #main.layout-land #left {
      top: 0;
      left: 0;
      bottom: 38%;
      right: 49%;
    }

    #main.layout-port #left {
      top: 0;
      left: 0;
      bottom: 0;
      right: 60%;
    }

    #main.layout-land #right {
      top: 0;
      left: 50%;
      bottom: 0;
      right: 0;
    }

    #main.layout-port #right {
      top: 0;
      left: 40%;
      bottom: 30%;
      right: 0;
    }

    /* input box styling */
    #main.layout-land #bottom {
      top: 62%;
      left: 0;
      bottom: 10%;
      right: 50%;
    }

    #main.layout-port #bottom {
      top: 62%;
      left: 0;
      bottom: 10%;
      right: 50%;

    }

    #main.presence-vr #left {
      box-shadow: none;
      background-color: transparent;
    }

    #main.presence-vr #view {
      display: none;
    }

    #main.presence-vr #left .border {
      display: none;
    }

    #main.presence-vr #avatar {
      bottom: 39%;
      /* left: -400px;
      right: -400px; */
    }


    @media (max-width: 1000px) {

      #main.ratio-wide,
      #main.ratio-normal {
        width: 96vw;
        height: 90vh;
      }

      #main.layout-land #left {
        top: 0;
        left: 0;
        bottom: 32%;
        right: 49%;
      }

      #main.layout-port #left {
        top: 0;
        left: 0;
        /* bottom: 32%; */
        right: 62%;
      }

      #main.layout-land #right {
        top: 38%;
        left: 0;
        bottom: 24%;
        right: 0;
      }

      #main.layout-port #right {
        top: 0;
        left: 38%;
        bottom: 24%;
        right: 0;
      }

      #main.layout-land #bottom {
        top: 70%;
        left: 0;
        bottom: 7%;
        right: 0;
      }

      #main.layout-port #bottom {
        top: 65%;
        left: 0;
        bottom: 7%;
        right: 0;
      }
    }

    .input-group {
      margin-top: 10px;
    }

    .input-group textarea {
      width: calc(100% - 10px);
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: none;
    }

    .input-group button {
      padding: 10px 20px;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }

    .input-group button:hover {
      background-color: #0056b3;
    }



    /*
! tailwindcss v3.4.1 | MIT License | https://tailwindcss.com
*/

    /*
1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)
2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)
*/

    *,
    ::before,
    ::after {
      box-sizing: border-box;
      /* 1 */
      border-width: 0;
      /* 2 */
      border-style: solid;
      /* 2 */
      border-color: #e5e7eb;
      /* 2 */
    }

    ::before,
    ::after {
      --tw-content: '';
    }

    /*
1. Use a consistent sensible line-height in all browsers.
2. Prevent adjustments of font size after orientation changes in iOS.
3. Use a more readable tab size.
4. Use the user's configured `sans` font-family by default.
5. Use the user's configured `sans` font-feature-settings by default.
6. Use the user's configured `sans` font-variation-settings by default.
7. Disable tap highlights on iOS
*/

    html,
    :host {
      line-height: 1.5;
      /* 1 */
      -webkit-text-size-adjust: 100%;
      /* 2 */
      -moz-tab-size: 4;
      /* 3 */
      -o-tab-size: 4;
      tab-size: 4;
      /* 3 */
      font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      /* 4 */
      font-feature-settings: normal;
      /* 5 */
      font-variation-settings: normal;
      /* 6 */
      -webkit-tap-highlight-color: transparent;
      /* 7 */
    }

    /*
1. Remove the margin in all browsers.
2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.
*/

    body {
      margin: 0;
      /* 1 */
      line-height: inherit;
      /* 2 */
    }

    /*
1. Add the correct height in Firefox.
2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)
3. Ensure horizontal rules are visible by default.
*/

    hr {
      height: 0;
      /* 1 */
      color: inherit;
      /* 2 */
      border-top-width: 1px;
      /* 3 */
    }

    /*
Add the correct text decoration in Chrome, Edge, and Safari.
*/

    abbr:where([title]) {
      -webkit-text-decoration: underline dotted;
      text-decoration: underline dotted;
    }

    /*
Remove the default font size and weight for headings.
*/

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: inherit;
      font-weight: inherit;
    }

    /*
Reset links to optimize for opt-in styling instead of opt-out.
*/

    a {
      color: inherit;
      text-decoration: inherit;
    }

    /*
Add the correct font weight in Edge and Safari.
*/

    b,
    strong {
      font-weight: bolder;
    }

    /*
1. Use the user's configured `mono` font-family by default.
2. Use the user's configured `mono` font-feature-settings by default.
3. Use the user's configured `mono` font-variation-settings by default.
4. Correct the odd `em` font sizing in all browsers.
*/

    code,
    kbd,
    samp,
    pre {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      /* 1 */
      font-feature-settings: normal;
      /* 2 */
      font-variation-settings: normal;
      /* 3 */
      font-size: 1em;
      /* 4 */
    }

    /*
Add the correct font size in all browsers.
*/

    small {
      font-size: 80%;
    }

    /*
Prevent `sub` and `sup` elements from affecting the line height in all browsers.
*/

    sub,
    sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline;
    }

    sub {
      bottom: -0.25em;
    }

    sup {
      top: -0.5em;
    }

    /*
1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)
2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)
3. Remove gaps between table borders by default.
*/

    table {
      text-indent: 0;
      /* 1 */
      border-color: inherit;
      /* 2 */
      border-collapse: collapse;
      /* 3 */
    }

    /*
1. Change the font styles in all browsers.
2. Remove the margin in Firefox and Safari.
3. Remove default padding in all browsers.
*/

    button,
    input,
    optgroup,
    select,
    textarea {
      font-family: inherit;
      /* 1 */
      font-feature-settings: inherit;
      /* 1 */
      font-variation-settings: inherit;
      /* 1 */
      font-size: 100%;
      /* 1 */
      font-weight: inherit;
      /* 1 */
      line-height: inherit;
      /* 1 */
      color: inherit;
      /* 1 */
      margin: 0;
      /* 2 */
      padding: 0;
      /* 3 */
    }

    /*
Remove the inheritance of text transform in Edge and Firefox.
*/

    button,
    select {
      text-transform: none;
    }

    /*
1. Correct the inability to style clickable types in iOS and Safari.
2. Remove default button styles.
*/

    button,
    [type='button'],
    [type='reset'],
    [type='submit'] {
      /* -webkit-appearance: button; */
      /* 1 */
      background-color: transparent;
      /* 2 */
      background-image: none;
      /* 2 */
    }

    /*
Use the modern Firefox focus style for all focusable elements.
*/

    :-moz-focusring {
      outline: auto;
    }

    /*
Remove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)
*/

    :-moz-ui-invalid {
      box-shadow: none;
    }

    /*
Add the correct vertical alignment in Chrome and Firefox.
*/

    progress {
      vertical-align: baseline;
    }

    /*
Correct the cursor style of increment and decrement buttons in Safari.
*/

    ::-webkit-inner-spin-button,
    ::-webkit-outer-spin-button {
      height: auto;
    }

    /*
1. Correct the odd appearance in Chrome and Safari.
2. Correct the outline style in Safari.
*/

    [type='search'] {
      /* -webkit-appearance: textfield; */
      /* 1 */
      outline-offset: -2px;
      /* 2 */
    }

    /*
Remove the inner padding in Chrome and Safari on macOS.
*/

    ::-webkit-search-decoration {
      -webkit-appearance: none;
    }

    /*
1. Correct the inability to style clickable types in iOS and Safari.
2. Change font properties to `inherit` in Safari.
*/

    ::-webkit-file-upload-button {
      -webkit-appearance: button;
      /* 1 */
      font: inherit;
      /* 2 */
    }

    /*
Add the correct display in Chrome and Safari.
*/

    summary {
      display: list-item;
    }

    /*
Removes the default spacing and border for appropriate elements.
*/

    blockquote,
    dl,
    dd,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    hr,
    figure,
    p,
    pre {
      margin: 0;
    }

    fieldset {
      margin: 0;
      padding: 0;
    }

    legend {
      padding: 0;
    }

    ol,
    ul,
    menu {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    /*
Reset default styling for dialogs.
*/

    dialog {
      padding: 0;
    }

    /*
Prevent resizing textareas horizontally by default.
*/

    textarea {
      resize: vertical;
    }

    /*
1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)
2. Set the default placeholder color to the user's configured gray 400 color.
*/

    input::-moz-placeholder,
    textarea::-moz-placeholder {
      opacity: 1;
      /* 1 */
      color: #9ca3af;
      /* 2 */
    }

    input::placeholder,
    textarea::placeholder {
      opacity: 1;
      /* 1 */
      color: #9ca3af;
      /* 2 */
    }

    /*
Set the default cursor for buttons.
*/

    button,
    [role="button"] {
      cursor: pointer;
    }

    /*
Make sure disabled buttons don't get the pointer cursor.
*/

    :disabled {
      cursor: default;
    }

    /*
1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)
2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)
   This can trigger a poorly considered lint error in some tools but is included by design.
*/

    img,
    svg,
    video,
    canvas,
    audio,
    iframe,
    embed,
    object {
      display: block;
      /* 1 */
      /* 2 */
    }

    /*
Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)
*/

    img,
    video {
      max-width: 100%;
      height: auto;
    }

    /* Make elements with the HTML hidden attribute stay hidden by default */

    [hidden] {
      display: none;
    }

    *,
    ::before,
    ::after {
      --tw-border-spacing-x: 0;
      --tw-border-spacing-y: 0;
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-rotate: 0;
      --tw-skew-x: 0;
      --tw-skew-y: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-pan-x: ;
      --tw-pan-y: ;
      --tw-pinch-zoom: ;
      --tw-scroll-snap-strictness: proximity;
      --tw-gradient-from-position: ;
      --tw-gradient-via-position: ;
      --tw-gradient-to-position: ;
      --tw-ordinal: ;
      --tw-slashed-zero: ;
      --tw-numeric-figure: ;
      --tw-numeric-spacing: ;
      --tw-numeric-fraction: ;
      --tw-ring-inset: ;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-color: rgb(59 130 246 / 0.5);
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-ring-shadow: 0 0 #0000;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-colored: 0 0 #0000;
      --tw-blur: ;
      --tw-brightness: ;
      --tw-contrast: ;
      --tw-grayscale: ;
      --tw-hue-rotate: ;
      --tw-invert: ;
      --tw-saturate: ;
      --tw-sepia: ;
      --tw-drop-shadow: ;
      --tw-backdrop-blur: ;
      --tw-backdrop-brightness: ;
      --tw-backdrop-contrast: ;
      --tw-backdrop-grayscale: ;
      --tw-backdrop-hue-rotate: ;
      --tw-backdrop-invert: ;
      --tw-backdrop-opacity: ;
      --tw-backdrop-saturate: ;
      --tw-backdrop-sepia: ;
    }

    ::backdrop {
      --tw-border-spacing-x: 0;
      --tw-border-spacing-y: 0;
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-rotate: 0;
      --tw-skew-x: 0;
      --tw-skew-y: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-pan-x: ;
      --tw-pan-y: ;
      --tw-pinch-zoom: ;
      --tw-scroll-snap-strictness: proximity;
      --tw-gradient-from-position: ;
      --tw-gradient-via-position: ;
      --tw-gradient-to-position: ;
      --tw-ordinal: ;
      --tw-slashed-zero: ;
      --tw-numeric-figure: ;
      --tw-numeric-spacing: ;
      --tw-numeric-fraction: ;
      --tw-ring-inset: ;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-color: rgb(59 130 246 / 0.5);
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-ring-shadow: 0 0 #0000;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-colored: 0 0 #0000;
      --tw-blur: ;
      --tw-brightness: ;
      --tw-contrast: ;
      --tw-grayscale: ;
      --tw-hue-rotate: ;
      --tw-invert: ;
      --tw-saturate: ;
      --tw-sepia: ;
      --tw-drop-shadow: ;
      --tw-backdrop-blur: ;
      --tw-backdrop-brightness: ;
      --tw-backdrop-contrast: ;
      --tw-backdrop-grayscale: ;
      --tw-backdrop-hue-rotate: ;
      --tw-backdrop-invert: ;
      --tw-backdrop-opacity: ;
      --tw-backdrop-saturate: ;
      --tw-backdrop-sepia: ;
    }

    .fixed {
      position: fixed;
    }

    .m-10 {
      margin: 2.5rem;
    }

    .m-5 {
      margin: 1.25rem;
    }

    .mx-\[20px\] {
      margin-left: 20px;
      margin-right: 20px;
    }

    .mx-20 {
      margin-left: 5rem;
      margin-right: 5rem;
    }

    .my-10 {
      margin-top: 2.5rem;
      margin-bottom: 2.5rem;
    }

    .block {
      display: block;
    }

    .flex {
      display: flex;
    }

    .contents {
      display: contents;
    }

    .hidden {
      display: none;
    }

    .h-14 {
      height: 3.5rem;
    }

    .h-\[400px\] {
      height: 400px;
    }

    .h-\[300px\] {
      height: 300px;
    }

    .h-\[380px\] {
      height: 380px;
    }

    .h-\[420px\] {
      height: 420px;
    }

    .h-\[40px\] {
      height: 40px;
    }

    .h-\[450px\] {
      height: 450px;
    }

    .h-\[430px\] {
      height: 430px;
    }

    .h-\[440px\] {
      height: 440px;
    }

    .h-\[470px\] {
      height: 470px;
    }

    .w-full {
      width: 100%;
    }



    .w-10 {
      width: 2.5rem;
    }

    .w-4\/5 {
      width: 80%;
    }

    .cursor-pointer {
      cursor: pointer;
    }

    .resize {
      resize: both;
    }

    .items-center {
      align-items: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .gap-2 {
      gap: 0.5rem;
    }

    .gap-3 {
      gap: 0.75rem;
    }

    .overflow-hidden {
      overflow: hidden;
    }

    .rounded {
      border-radius: 0.25rem;
    }

    .border {
      border-width: 1px;
    }

    .bg-\[rgb\(255\2c 193\2c 7\)\] {
      --tw-bg-opacity: 1;
      background-color: rgb(255 193 7 / var(--tw-bg-opacity));
    }

    .bg-blue-600 {
      --tw-bg-opacity: 1;
      background-color: rgb(37 99 235 / var(--tw-bg-opacity));
    }

    .bg-\[rgb\(255\2c 193\2c \)\] {
      background-color: rgb(255, 193, );
    }

    .bg-\[rgb\(255\2c 193\2c 8\)\] {
      --tw-bg-opacity: 1;
      background-color: rgb(255 193 8 / var(--tw-bg-opacity));
    }

    .bg-\[\#ffc108\] {
      --tw-bg-opacity: 1;
      background-color: rgb(255 193 8 / var(--tw-bg-opacity));
    }

    .bg-\[\#ffcc32\] {
      --tw-bg-opacity: 1;
      background-color: rgb(255 204 50 / var(--tw-bg-opacity));
    }

    .bg-\[hsl\(45\2c 100\%\2c 52\%\)\] {
      --tw-bg-opacity: 1;
      background-color: hsl(45 100% 52% / var(--tw-bg-opacity));
    }

    .bg-slate-400 {
      --tw-bg-opacity: 1;
      background-color: rgb(148 163 184 / var(--tw-bg-opacity));
    }

    .bg-slate-100 {
      --tw-bg-opacity: 1;
      background-color: rgb(241 245 249 / var(--tw-bg-opacity));
    }

    .p-2 {
      padding: 0.5rem;
    }

    .px-8 {
      padding-left: 2rem;
      padding-right: 2rem;
    }

    .text-center {
      text-align: center;
    }

    .text-2xl {
      font-size: 1.5rem;
      line-height: 2rem;
    }

    .text-4xl {
      font-size: 2.25rem;
      line-height: 2.5rem;
    }

    .font-bold {
      font-weight: 700;
    }

    .font-semibold {
      font-weight: 600;
    }

    .text-white {
      --tw-text-opacity: 1;
      color: rgb(255 255 255 / var(--tw-text-opacity));
    }

    .blur {
      --tw-blur: blur(8px);
      filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
    }

    .filter {
      filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
    }

    .hover\:bg-yellow-600:hover {
      --tw-bg-opacity: 1;
      background-color: rgb(202 138 4 / var(--tw-bg-opacity));
    }

    .hover\:bg-yellow-500:hover {
      --tw-bg-opacity: 1;
      background-color: rgb(234 179 8 / var(--tw-bg-opacity));
    }

    .hover\:bg-yellow-300:hover {
      --tw-bg-opacity: 1;
      background-color: rgb(253 224 71 / var(--tw-bg-opacity));
    }

    .hover\:bg-yellow-400:hover {
      --tw-bg-opacity: 1;
      background-color: rgb(250 204 21 / var(--tw-bg-opacity));
    }

    .active\:bg-yellow-400:active {
      --tw-bg-opacity: 1;
      background-color: rgb(250 204 21 / var(--tw-bg-opacity));
    }

    .active\:bg-\[\#ffc108\]:active {
      --tw-bg-opacity: 1;
      background-color: rgb(255 193 8 / var(--tw-bg-opacity));
    }

    .rounded-xl {
      border-radius: 2.5rem;
    }

    .bg-\[\#658699\] {
  background-color: #7DA8BF;
}

    .bg-\[\#648698\] {
      background-color: #648699;
    }

    .bg-\[\#648698\]:hover {
      background-color: #739BB0;
    }

    .bg-\[\#648698\]:active {
      background-color: #648699;
    }


    @media (min-width: 768px) {
      .md\:block {
        display: block;
      }

      .md\:flex {
        display: flex;
      }

      .md\:hidden {
        display: none;
      }

      .md\:px-12 {
        padding-left: 3rem;
        padding-right: 3rem;
      }
    }

    #admin-mic-container {
      position: absolute;
      bottom: -3%;
      left: 25%;
      transform: translateX(-50%);
      color: #0c0c0c;
      background-color: white;
      border-radius: 50%;
      padding: 10px 20px;
    }

    #admin-mic-container:hover {
      cursor: pointer !important;
    }

    #admin-mic-container.recording {
      color: red;
    }
  </style>

  <script
    nomodule>alert("You browser doesn't seem to support modules. Use a modern browser to run Enterprise.");</script>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1.7.1/dist/es-module-shims.js"></script>
  <script type="importmap">
{ "imports":
{
"three": "https://cdn.jsdelivr.net/npm/three@0.149.0/build/three.module.js/+esm",
"three/examples/": "https://cdn.jsdelivr.net/npm/three@0.149.0/examples/",
"three/addons/": "https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/",
"dompurify": "https://cdn.jsdelivr.net/npm/dompurify@3.0.6/+esm",
"marked": "https://cdn.jsdelivr.net/npm/marked@11.2.0/+esm"
}
}
</script>
  <script
    src="https://cdn.jsdelivr.net/npm/microsoft-cognitiveservices-speech-sdk@latest/distrib/browser/microsoft.cognitiveservices.speech.sdk.bundle-min.js"></script>
  <script type="module" src="script.js"></script>

</head>

<body class="theme-light" onload="checkLoginState()">
  <!-- navbar goes here -->
  <header>
    <nav class="flex justify-between items-center bg-[#658699] w-full h-14 px-8 md:px-12">
      <div class="text-2xl text-white font-bold flex gap-3 cursor-pointer"><img src="favicon.png" alt="logo" width="25">
        <h1>Avatarify</h1>
      </div>
      <ul class="md:flex hidden font-semibold text-white">
        <li class="mx-[20px] cursor-pointer"><a href="./index.html">Home</a></li>
        <li class="mx-[20px] cursor-pointer">About</li>
        <li class="mx-[20px] cursor-pointer">Contact</li>
      </ul>
      <div style="display: flex; gap: 10px;">
        <div style="text-align: center; margin: auto;"><span id="navUsername" style="color: white;"></span></div>
        <div class="hidden md:block p-2 text-white bg-[#648698] rounded-xl font-bold cursor-pointer">
          <a href="#" onclick="handleLogout()">Logout</a>
        </div>
      </div>
      <div class="md:hidden">
        <a class="text-4xl" href="#">&#8801;</a>
      </div>
    </nav>
  </header>
  <!-- navbar ends here -->
  </nav>

  <div id="main" class="ratio-wide layout-land presence-video">

    <div id="left" class="noselect nodrag">


      <div id="view">
        <video id="video" autoplay loop muted playsinline>
          <source id="view-video" src="" type="video/mp4">
        </video>
      </div>

      <div id="avatar"></div>

      <div class="border starttransparent"></div>

      <div id="loading">
        <div id="loading-back"></div>
        <div id="loading-top"></div>
        <div id="loading-value"></div>
      </div>

      <!-- <div style="position: fixed; top: 94%; left:25%; transform: translateX(-50%);">

        <i class="fa fa-microphone" id="startRecording" style="font-size:48px;color:red"></i>

      </div> -->

    </div>

    <div id="mic-layout">
      <button id="admin-mic-container">
        <i onclick="toggleRecording()" class="fa fa-microphone" style="font-size:48px;"></i>
      </button>
    </div>

    <div id="right">

      <div class="pages">

        <div class="row noselect nodrag">

          <div class="command starttransparent" data-i18n-title="Session" data-show="right-session">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"
                fill="currentColor" />
              <path
                d="M2 12.0322C2 11.4799 2.44772 11.0322 3 11.0322H21C21.5523 11.0322 22 11.4799 22 12.0322C22 12.5845 21.5523 13.0322 21 13.0322H3C2.44772 13.0322 2 12.5845 2 12.0322Z"
                fill="currentColor" />
              <path
                d="M3 17.0645C2.44772 17.0645 2 17.5122 2 18.0645C2 18.6167 2.44772 19.0645 3 19.0645H21C21.5523 19.0645 22 18.6167 22 18.0645C22 17.5122 21.5523 17.0645 21 17.0645H3Z"
                fill="currentColor" />
            </svg>
          </div>

          <div id="name" class="text starttransparent">
            Nimet&ouml;n
          </div>

          <div class="filler"></div>

          <div class="command starttransparent" data-i18n-title="Manuscript" data-show="right-ai">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 18H17V16H7V18Z" fill="currentColor" />
              <path d="M17 14H7V12H17V14Z" fill="currentColor" />
              <path d="M7 10H11V8H7V10Z" fill="currentColor" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M6 2C4.34315 2 3 3.34315 3 5V19C3 20.6569 4.34315 22 6 22H18C19.6569 22 21 20.6569 21 19V9C21 5.13401 17.866 2 14 2H6ZM6 4H13V9H19V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V5C5 4.44772 5.44772 4 6 4ZM15 4.10002C16.6113 4.4271 17.9413 5.52906 18.584 7H15V4.10002Z"
                fill="currentColor" />
            </svg>
          </div>
          <div class="command starttransparent" data-i18n-title="Location" data-show="right-view">
            <svg viewBox="-1 -1 26 26" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M7 7C5.34315 7 4 8.34315 4 10C4 11.6569 5.34315 13 7 13C8.65685 13 10 11.6569 10 10C10 8.34315 8.65685 7 7 7ZM6 10C6 9.44772 6.44772 9 7 9C7.55228 9 8 9.44772 8 10C8 10.5523 7.55228 11 7 11C6.44772 11 6 10.5523 6 10Z"
                fill="currentColor" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H3C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H7.31374L14.1924 12.1214C15.364 10.9498 17.2635 10.9498 18.435 12.1214L22 15.6863V6C22 5.44772 21.5523 5 21 5ZM21 19H10.1422L15.6066 13.5356C15.9971 13.145 16.6303 13.145 17.0208 13.5356L21.907 18.4217C21.7479 18.7633 21.4016 19 21 19Z"
                fill="currentColor" />
            </svg>
          </div>
          <div class="command starttransparent" data-i18n-title="Avatar" data-show="right-avatar">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7Z"
                fill="currentColor" />
              <path
                d="M16 15C16 14.4477 15.5523 14 15 14H9C8.44772 14 8 14.4477 8 15V21H6V15C6 13.3431 7.34315 12 9 12H15C16.6569 12 18 13.3431 18 15V21H16V15Z"
                fill="currentColor" />
            </svg>
          </div>
          <div class="command starttransparent" data-i18n-title="Camera" data-show="right-camera">
            <svg viewBox="-1 -1 26 26" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M4 4.5V6.5H12V7.5H3C1.34315 7.5 0 8.84315 0 10.5V16.5C0 18.1569 1.34315 19.5 3 19.5H15C16.5731 19.5 17.8634 18.2892 17.9898 16.7487L24 17.5V9.5L17.9898 10.2513C17.8634 8.71078 16.5731 7.5 15 7.5H14V5.5C14 4.94772 13.5523 4.5 13 4.5H4ZM18 12.2656V14.7344L22 15.2344V11.7656L18 12.2656ZM16 10.5C16 9.94772 15.5523 9.5 15 9.5H3C2.44772 9.5 2 9.94772 2 10.5V16.5C2 17.0523 2.44772 17.5 3 17.5H15C15.5523 17.5 16 17.0523 16 16.5V10.5Z"
                fill="currentColor" />
            </svg>
          </div>
          <div class="command starttransparent" data-i18n-title="Audio" data-show="right-audio">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M12 8.95439L17.6352 7.82736C19.0102 7.55235 20 6.34501 20 4.94274C20 3.08637 18.3017 1.69406 16.4813 2.05813L12.4117 2.87206C11.0094 3.15252 10 4.38376 10 5.8138V13.8895C9.41165 13.5492 8.72857 13.3544 8 13.3544C5.79086 13.3544 4 15.1453 4 17.3544C4 19.5635 5.79086 21.3544 8 21.3544C10.2091 21.3544 12 19.5635 12 17.3544V8.95439ZM16.8736 4.01929L12.8039 4.83322C12.3365 4.92671 12 5.33712 12 5.8138V6.91479L17.2429 5.8662C17.6831 5.77816 18 5.39165 18 4.94274C18 4.34846 17.4563 3.90274 16.8736 4.01929ZM10 17.3544C10 16.2498 9.10457 15.3544 8 15.3544C6.89543 15.3544 6 16.2498 6 17.3544C6 18.459 6.89543 19.3544 8 19.3544C9.10457 19.3544 10 18.459 10 17.3544Z"
                fill="currentColor" />
            </svg>
          </div>

        </div>

        <div id="right-ai" class="page noselect nodrag hidden">

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="AI"></div>
            <div class="column">
              <div class="rowWrap">
                <div class="command selected" data-item="ai-model" data-type="option" data-ai-model="gpt-3.5-turbo">
                  GPT-3.5-Turbo</div>
                <div class="command" data-item="ai-model" data-type="option" data-ai-model="gpt-4">GPT-4</div>
                <div class="command" data-item="ai-model" data-type="option" data-ai-model="gemini-pro">Gemini-pro</div>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div id="ai-openai" class="column">
            <div class="row">
              <div class="text label" data-i18n-text="System"></div>
              <textarea data-i18n-placeholder="ai-system" rows="1" autocapitalize="sentences"
                data-item="ai-openai-system" data-type="value" data-ai-openai-system=""></textarea>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="Example1"></div>
              <textarea data-i18n-placeholder="ai-user1" rows="1" autocapitalize="sentences" data-item="ai-openai-user1"
                data-type="value" data-ai-openai-user1=""></textarea>
            </div>
            <div class="row">
              <div class="text label"></div>
              <textarea data-i18n-placeholder="ai-ai1" rows="1" autocapitalize="sentences" data-item="ai-openai-ai1"
                data-type="value" data-ai-openai-ai1=""></textarea>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="Example2"></div>
              <textarea data-i18n-placeholder="ai-user2" rows="1" autocapitalize="sentences" data-item="ai-openai-user2"
                data-type="value" data-ai-openai-user2=""></textarea>
            </div>
            <div class="row">
              <div class="text label"></div>
              <textarea data-i18n-placeholder="ai-ai2" rows="1" autocapitalize="sentences" data-item="ai-openai-ai2"
                data-type="value" data-ai-openai-ai2=""></textarea>
            </div>

            <div class="vbar"></div>

            <div class="row">
              <div class="text label" data-i18n-text="Adjust"></div>
              <div class="column">
                <div class="row">
                  <div class="command" data-target="ai-openai-temperature" data-range-reset="1.0">
                    <svg viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M336 972.8c-60.8-128-28.8-201.6 19.2-268.8 51.2-76.8 64-150.4 64-150.4s41.6 51.2 25.6 134.4c70.4-80 83.2-208 73.6-256 160 112 230.4 358.4 137.6 537.6 492.8-281.6 121.6-700.8 57.6-745.6 22.4 48 25.6 128-19.2 166.4-73.6-281.6-256-336-256-336 22.4 144-76.8 300.8-172.8 419.2-3.2-57.6-6.4-96-38.4-153.6-6.4 105.6-86.4 188.8-108.8 294.4C89.6 758.4 140.8 860.8 336 972.8L336 972.8z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="0" max="2" step="0.1" value="1.0" data-range="float"
                    data-item="ai-openai-temperature" data-type="value" data-ai-openai-temperature="">
                  <div class="text">1.0</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-openai-presence" data-range-reset="0.0">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M9.00967 5.12761H11.0097C12.1142 5.12761 13.468 5.89682 14.0335 6.8457L16.5089 11H21.0097C21.562 11 22.0097 11.4477 22.0097 12C22.0097 12.5523 21.562 13 21.0097 13H16.4138L13.9383 17.1543C13.3729 18.1032 12.0191 18.8724 10.9145 18.8724H8.91454L12.4138 13H5.42485L3.99036 15.4529H1.99036L4.00967 12L4.00967 11.967L2.00967 8.54712H4.00967L5.44417 11H12.5089L9.00967 5.12761Z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="-1" max="2" step="0.1" value="0.0" data-range="float"
                    data-item="ai-openai-presence" data-type="value" data-ai-openai-presence="">
                  <div class="text">0.0</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-openai-frequency" data-range-reset="0.0">
                    <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M21.2635 2.29289C20.873 1.90237 20.2398 1.90237 19.8493 2.29289L18.9769 3.16525C17.8618 2.63254 16.4857 2.82801 15.5621 3.75165L4.95549 14.3582L10.6123 20.0151L21.2189 9.4085C22.1426 8.48486 22.338 7.1088 21.8053 5.99367L22.6777 5.12132C23.0682 4.7308 23.0682 4.09763 22.6777 3.70711L21.2635 2.29289ZM16.9955 10.8035L10.6123 17.1867L7.78392 14.3582L14.1671 7.9751L16.9955 10.8035ZM18.8138 8.98525L19.8047 7.99429C20.1953 7.60376 20.1953 6.9706 19.8047 6.58007L18.3905 5.16586C18 4.77534 17.3668 4.77534 16.9763 5.16586L15.9853 6.15683L18.8138 8.98525Z"
                        fill="currentColor" />
                      <path d="M2 22.9502L4.12171 15.1717L9.77817 20.8289L2 22.9502Z" fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="-2" max="2" step="0.1" value="0.0" data-range="float"
                    data-item="ai-openai-frequency" data-type="value" data-ai-openai-frequency="">
                  <div class="text">0.0</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="Limits"></div>
              <div class="column">
                <div class="row">
                  <div class="command" data-target="ai-openai-dialog" data-range-reset="4">
                    <svg viewBox="-100 -100 1224 1224" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M170.65984 42.65984l682.65984 0q53.00224 0 90.50112 37.49888t37.49888 90.50112l0 469.34016q0 53.00224-37.49888 90.50112t-90.50112 37.49888l-341.34016 0-298.65984 213.34016 0-213.34016-42.65984 0q-53.00224 0-90.50112-37.49888t-37.49888-90.50112l0-469.34016q0-53.00224 37.49888-90.50112t90.50112-37.49888zM853.34016 128l-682.65984 0q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 469.34016q0 17.67424 12.4928 30.16704t30.16704 12.4928l128 0 0 132.99712 185.99936-132.99712 368.66048 0q17.67424 0 30.16704-12.4928t12.4928-30.16704l0-469.34016q0-17.67424-12.4928-30.16704t-30.16704-12.4928z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="2" max="10" step="2" value="4" data-range="dialog"
                    data-item="ai-openai-dialog" data-type="value" data-ai-openai-dialog="">
                  <div class="text">4 sanomaa</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-openai-input" data-range-reset="2000">
                    <svg viewBox="-1 -1 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12V4ZM13 4V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4Z"
                        fill="currentColor" />
                      <path
                        d="M18 12C18 14.973 15.8377 17.441 13 17.917V21H17V23H7V21H11V17.917C8.16229 17.441 6 14.973 6 12V9H8V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V9H18V12Z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="100" max="4000" step="100" value="2000" data-range="word"
                    data-item="ai-openai-input" data-type="value" data-ai-openai-input="">
                  <div class="text">1000 sanaa</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-openai-output" data-range-reset="1000">
                    <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M12 18.939C14.2091 18.939 16 17.1482 16 14.939C16 12.7299 14.2091 10.939 12 10.939C9.79086 10.939 8 12.7299 8 14.939C8 17.1482 9.79086 18.939 12 18.939ZM12 16.939C13.1046 16.939 14 16.0436 14 14.939C14 13.8345 13.1046 12.939 12 12.939C10.8954 12.939 10 13.8345 10 14.939C10 16.0436 10.8954 16.939 12 16.939Z"
                        fill="currentColor" />
                      <path
                        d="M12 9.04401C13.1046 9.04401 14 8.14858 14 7.04401C14 5.93944 13.1046 5.04401 12 5.04401C10.8954 5.04401 10 5.93944 10 7.04401C10 8.14858 10.8954 9.04401 12 9.04401Z"
                        fill="currentColor" />
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M7 1C5.34315 1 4 2.34315 4 4V20C4 21.6569 5.34315 23 7 23H17C18.6569 23 20 21.6569 20 20V4C20 2.34315 18.6569 1 17 1H7ZM17 3H7C6.44772 3 6 3.44772 6 4V20C6 20.5523 6.44772 21 7 21H17C17.5523 21 18 20.5523 18 20V4C18 3.44772 17.5523 3 17 3Z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="100" max="4000" step="100" value="1000" data-range="word"
                    data-item="ai-openai-output" data-type="value" data-ai-openai-output="">
                  <div class="text">2000 sanaa</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="ai-stop"></div>
              <input type="text" data-i18n-placeholder="ai-stopword" data-item="ai-openai-stop" data-type="value"
                data-ai-openai-stop="">
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="ai-user"></div>
              <input type="text" data-i18n-placeholder="ai-username" data-item="ai-openai-user" data-type="value"
                data-ai-openai-user="">
            </div>
          </div>

          <div id="ai-gemini" class="column">
            <div class="row">
              <div class="text label" data-i18n-text="Example1"></div>
              <textarea data-i18n-placeholder="ai-user1" rows="1" autocapitalize="sentences" data-item="ai-gemini-user1"
                data-type="value" data-ai-gemini-user1=""></textarea>
            </div>
            <div class="row">
              <div class="text label"></div>
              <textarea data-i18n-placeholder="ai-ai1" rows="1" autocapitalize="sentences" data-item="ai-gemini-ai1"
                data-type="value" data-ai-gemini-ai1=""></textarea>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="Example2"></div>
              <textarea data-i18n-placeholder="ai-user2" rows="1" autocapitalize="sentences" data-item="ai-gemini-user2"
                data-type="value" data-ai-gemini-user2=""></textarea>
            </div>
            <div class="row">
              <div class="text label"></div>
              <textarea data-i18n-placeholder="ai-ai2" rows="1" autocapitalize="sentences" data-item="ai-gemini-ai2"
                data-type="value" data-ai-gemini-ai2=""></textarea>
            </div>

            <div class="vbar"></div>

            <div class="row">
              <div class="text label" data-i18n-text="Adjust"></div>
              <div class="column">
                <div class="row">
                  <div class="command" data-target="ai-gemini-temperature" data-range-reset="1.0">
                    <svg viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M336 972.8c-60.8-128-28.8-201.6 19.2-268.8 51.2-76.8 64-150.4 64-150.4s41.6 51.2 25.6 134.4c70.4-80 83.2-208 73.6-256 160 112 230.4 358.4 137.6 537.6 492.8-281.6 121.6-700.8 57.6-745.6 22.4 48 25.6 128-19.2 166.4-73.6-281.6-256-336-256-336 22.4 144-76.8 300.8-172.8 419.2-3.2-57.6-6.4-96-38.4-153.6-6.4 105.6-86.4 188.8-108.8 294.4C89.6 758.4 140.8 860.8 336 972.8L336 972.8z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="0" max="1" step="0.1" value="1.0" data-range="float"
                    data-item="ai-gemini-temperature" data-type="value" data-ai-gemini-temperature="">
                  <div class="text">1.0</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-gemini-topp" data-range-reset="1.0"
                    style="display:block; text-align: center; width: 2rem;">P</div>
                  <input type="range" min="0" max="1" step="0.05" value="1.0" data-range="float"
                    data-item="ai-gemini-topp" data-type="value" data-ai-gemini-topp="">
                  <div class="text">1.0</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-gemini-topk" data-range-reset="40"
                    style="display:block; text-align: center; width: 2rem;">K</div>
                  <input type="range" min="1" max="40" step="1" value="40" data-range="float" data-item="ai-gemini-topk"
                    data-type="value" data-ai-gemini-topk="">
                  <div class="text">40</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="Limits"></div>
              <div class="column">
                <div class="row">
                  <div class="command" data-target="ai-gemini-dialog" data-range-reset="4">
                    <svg viewBox="-100 -100 1224 1224" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M170.65984 42.65984l682.65984 0q53.00224 0 90.50112 37.49888t37.49888 90.50112l0 469.34016q0 53.00224-37.49888 90.50112t-90.50112 37.49888l-341.34016 0-298.65984 213.34016 0-213.34016-42.65984 0q-53.00224 0-90.50112-37.49888t-37.49888-90.50112l0-469.34016q0-53.00224 37.49888-90.50112t90.50112-37.49888zM853.34016 128l-682.65984 0q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 469.34016q0 17.67424 12.4928 30.16704t30.16704 12.4928l128 0 0 132.99712 185.99936-132.99712 368.66048 0q17.67424 0 30.16704-12.4928t12.4928-30.16704l0-469.34016q0-17.67424-12.4928-30.16704t-30.16704-12.4928z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="2" max="10" step="2" value="4" data-range="dialog"
                    data-item="ai-gemini-dialog" data-type="value" data-ai-gemini-dialog="">
                  <div class="text">4 sanomaa</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-gemini-input" data-range-reset="2000">
                    <svg viewBox="-1 -1 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12V4ZM13 4V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4Z"
                        fill="currentColor" />
                      <path
                        d="M18 12C18 14.973 15.8377 17.441 13 17.917V21H17V23H7V21H11V17.917C8.16229 17.441 6 14.973 6 12V9H8V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V9H18V12Z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="100" max="4000" step="100" value="2000" data-range="word"
                    data-item="ai-gemini-input" data-type="value" data-ai-gemini-input="">
                  <div class="text">1000 sanaa</div>
                </div>
                <div class="row">
                  <div class="command" data-target="ai-gemini-output" data-range-reset="1000">
                    <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M12 18.939C14.2091 18.939 16 17.1482 16 14.939C16 12.7299 14.2091 10.939 12 10.939C9.79086 10.939 8 12.7299 8 14.939C8 17.1482 9.79086 18.939 12 18.939ZM12 16.939C13.1046 16.939 14 16.0436 14 14.939C14 13.8345 13.1046 12.939 12 12.939C10.8954 12.939 10 13.8345 10 14.939C10 16.0436 10.8954 16.939 12 16.939Z"
                        fill="currentColor" />
                      <path
                        d="M12 9.04401C13.1046 9.04401 14 8.14858 14 7.04401C14 5.93944 13.1046 5.04401 12 5.04401C10.8954 5.04401 10 5.93944 10 7.04401C10 8.14858 10.8954 9.04401 12 9.04401Z"
                        fill="currentColor" />
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M7 1C5.34315 1 4 2.34315 4 4V20C4 21.6569 5.34315 23 7 23H17C18.6569 23 20 21.6569 20 20V4C20 2.34315 18.6569 1 17 1H7ZM17 3H7C6.44772 3 6 3.44772 6 4V20C6 20.5523 6.44772 21 7 21H17C17.5523 21 18 20.5523 18 20V4C18 3.44772 17.5523 3 17 3Z"
                        fill="currentColor" />
                    </svg>
                  </div>
                  <input type="range" min="100" max="4000" step="100" value="1000" data-range="word"
                    data-item="ai-gemini-output" data-type="value" data-ai-gemini-output="">
                  <div class="text">2000 sanaa</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="text label" data-i18n-text="ai-stop"></div>
              <input type="text" placeholder="Avainsana" data-item="ai-gemini-stop" data-type="value"
                data-ai-gemini-stop="">
            </div>
          </div>

        </div>

        <div id="right-view" class="page noselect nodrag hidden">

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Location"></div>
            <div class="column">
              <div id="views" class="rowWrap">
                <div class="command" data-view-image="FILE">
                  <svg viewBox="-2 -2 28 28" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M4 1.5C2.89543 1.5 2 2.39543 2 3.5V4.5C2 4.55666 2.00236 4.61278 2.00698 4.66825C0.838141 5.07811 0 6.19118 0 7.5V19.5C0 21.1569 1.34315 22.5 3 22.5H21C22.6569 22.5 24 21.1569 24 19.5V7.5C24 5.84315 22.6569 4.5 21 4.5H11.874C11.4299 2.77477 9.86384 1.5 8 1.5H4ZM9.73244 4.5C9.38663 3.9022 8.74028 3.5 8 3.5H4V4.5H9.73244ZM3 6.5C2.44772 6.5 2 6.94772 2 7.5V19.5C2 20.0523 2.44772 20.5 3 20.5H21C21.5523 20.5 22 20.0523 22 19.5V7.5C22 6.94772 21.5523 6.5 21 6.5H3Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <div class="command selected" data-i18n-text="Empty" data-item="view-image" data-type="option"
                  data-view-image="NONE"></div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="text label"></div>
            <div class="row fill">
              <div class="command" data-item="view-image" data-type="option" data-view-image="URL">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"
                    fill="currentColor" />
                  <path
                    d="M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"
                    fill="currentColor" />
                  <path
                    d="M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"
                    fill="currentColor" />
                </svg>
              </div>
              <input class="fill" type="text" placeholder="URL" data-item="view-url" data-type="value">
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Adjust"></div>
            <div class="column">
              <div class="row">
                <div class="command" data-target="view-brightness" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                      fill="currentColor" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M11 0H13V4.06189C12.6724 4.02104 12.3387 4 12 4C11.6613 4 11.3276 4.02104 11 4.06189V0ZM7.0943 5.68018L4.22173 2.80761L2.80752 4.22183L5.6801 7.09441C6.09071 6.56618 6.56608 6.0908 7.0943 5.68018ZM4.06189 11H0V13H4.06189C4.02104 12.6724 4 12.3387 4 12C4 11.6613 4.02104 11.3276 4.06189 11ZM5.6801 16.9056L2.80751 19.7782L4.22173 21.1924L7.0943 18.3198C6.56608 17.9092 6.09071 17.4338 5.6801 16.9056ZM11 19.9381V24H13V19.9381C12.6724 19.979 12.3387 20 12 20C11.6613 20 11.3276 19.979 11 19.9381ZM16.9056 18.3199L19.7781 21.1924L21.1923 19.7782L18.3198 16.9057C17.9092 17.4339 17.4338 17.9093 16.9056 18.3199ZM19.9381 13H24V11H19.9381C19.979 11.3276 20 11.6613 20 12C20 12.3387 19.979 12.6724 19.9381 13ZM18.3198 7.0943L21.1923 4.22183L19.7781 2.80762L16.9056 5.6801C17.4338 6.09071 17.9092 6.56608 18.3198 7.0943Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="2" step="0.05" value="1" data-item="view-brightness" data-type="value"
                  data-range="percentage" data-view-brightness="brightness">
                <div class="text">100%</div>
              </div>
              <div class="row">
                <div class="command" data-target="view-contrast" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M12 18C10.4633 18 9.06151 17.4223 8 16.4722C6.7725 15.3736 6 13.777 6 12C6 10.223 6.7725 8.62643 8 7.52779C9.06151 6.57771 10.4633 6 12 6V18Z"
                      fill="currentColor" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="2" step="0.05" value="1" data-item="view-contrast" data-type="value"
                  data-range="percentage" data-view-contrast="contrast">
                <div class="text">100%</div>
              </div>
              <div class="row">
                <div class="command" data-target="view-saturate" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M8.20348 2.00378C9.46407 2.00378 10.5067 3.10742 10.6786 4.54241L19.1622 13.0259L11.384 20.8041C10.2124 21.9757 8.31291 21.9757 7.14134 20.8041L2.8987 16.5615C1.72713 15.3899 1.72713 13.4904 2.8987 12.3188L5.70348 9.51404V4.96099C5.70348 3.32777 6.82277 2.00378 8.20348 2.00378ZM8.70348 4.96099V6.51404L7.70348 7.51404V4.96099C7.70348 4.63435 7.92734 4.36955 8.20348 4.36955C8.47963 4.36955 8.70348 4.63435 8.70348 4.96099ZM8.70348 10.8754V9.34247L4.31291 13.733C3.92239 14.1236 3.92239 14.7567 4.31291 15.1473L8.55555 19.3899C8.94608 19.7804 9.57924 19.7804 9.96977 19.3899L16.3337 13.0259L10.7035 7.39569V10.8754C10.7035 10.9184 10.7027 10.9612 10.7012 11.0038H8.69168C8.69941 10.9625 8.70348 10.9195 8.70348 10.8754Z"
                      fill="currentColor" />
                    <path
                      d="M16.8586 16.8749C15.687 18.0465 15.687 19.946 16.8586 21.1175C18.0302 22.2891 19.9297 22.2891 21.1013 21.1175C22.2728 19.946 22.2728 18.0465 21.1013 16.8749L18.9799 14.7536L16.8586 16.8749Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="2" step="0.05" value="1" data-item="view-saturate" data-type="value"
                  data-range="percentage" data-view-saturate="saturate">
                <div class="text">100%</div>
              </div>
              <div class="row">
                <div class="command" data-target="view-blur" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M4.70834 15.4397C5.92663 16.2928 7.3222 16.7038 8.70461 16.7063C9.17977 18.0045 10.0433 19.1753 11.2616 20.0284C14.4284 22.2458 18.7932 21.4762 21.0107 18.3093C23.2281 15.1425 22.4585 10.7777 19.2916 8.56024C18.0734 7.70719 16.6778 7.29621 15.2954 7.29371C14.8202 5.99552 13.9567 4.82467 12.7384 3.97161C9.57158 1.75417 5.20676 2.52381 2.98931 5.69064C0.771871 8.85748 1.54151 13.2223 4.70834 15.4397ZM5.8555 13.8014C6.6016 14.3239 7.44081 14.6142 8.28736 14.6875C8.20112 13.1725 8.60464 11.6187 9.54254 10.2793C10.4804 8.9398 11.8025 8.0292 13.2556 7.59209C12.8972 6.82166 12.3374 6.13235 11.5913 5.60992C9.32924 4.02603 6.21151 4.57577 4.62762 6.8378C3.04373 9.09982 3.59347 12.2176 5.8555 13.8014ZM18.1445 10.1985C17.3984 9.67611 16.5592 9.38581 15.7126 9.31251C15.7989 10.8275 15.3953 12.3813 14.4574 13.7207C13.5195 15.0602 12.1975 15.9708 10.7444 16.4079C11.1028 17.1783 11.6626 17.8676 12.4087 18.3901C14.6707 19.9739 17.7885 19.4242 19.3724 17.1622C20.9562 14.9002 20.4065 11.7824 18.1445 10.1985Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="4" step="0.2" value="0" data-item="view-blur" data-type="value"
                  data-range="px" data-view-blur="blur">
                <div class="text">0 px</div>
              </div>
            </div>
          </div>

        </div>

        <div id="right-avatar" class="page noselect nodrag hidden">

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Avatar"></div>
            <div class="column">
              <div id="avatars" class="rowWrap">
                <div class="command" data-avatar-name="FILE">
                  <svg viewBox="-2 -2 28 28" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M4 1.5C2.89543 1.5 2 2.39543 2 3.5V4.5C2 4.55666 2.00236 4.61278 2.00698 4.66825C0.838141 5.07811 0 6.19118 0 7.5V19.5C0 21.1569 1.34315 22.5 3 22.5H21C22.6569 22.5 24 21.1569 24 19.5V7.5C24 5.84315 22.6569 4.5 21 4.5H11.874C11.4299 2.77477 9.86384 1.5 8 1.5H4ZM9.73244 4.5C9.38663 3.9022 8.74028 3.5 8 3.5H4V4.5H9.73244ZM3 6.5C2.44772 6.5 2 6.94772 2 7.5V19.5C2 20.0523 2.44772 20.5 3 20.5H21C21.5523 20.5 22 20.0523 22 19.5V7.5C22 6.94772 21.5523 6.5 21 6.5H3Z"
                      fill="currentColor" />
                  </svg>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="text label"></div>
            <div class="row fill">
              <div class="command" data-item="avatar-name" data-type="option" data-avatar-name="URL">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z"
                    fill="currentColor" />
                  <path
                    d="M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z"
                    fill="currentColor" />
                  <path
                    d="M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z"
                    fill="currentColor" />
                </svg>
              </div>
              <input class="fill" type="text" placeholder="URL" data-item="avatar-url" data-type="value">
              <div class="command selected" data-item="avatar-body" data-type="option" data-avatar-body="F">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M12 3C9.23858 3 7 5.23858 7 8C7 10.419 8.71776 12.4367 11 12.9V15H8V17H11V21H13V17H16V15H13V12.9C15.2822 12.4367 17 10.419 17 8C17 5.23858 14.7614 3 12 3ZM9 8C9 9.65685 10.3431 11 12 11C13.6569 11 15 9.65685 15 8C15 6.34315 13.6569 5 12 5C10.3431 5 9 6.34315 9 8Z"
                    fill="currentColor" />
                </svg>
              </div>
              <div class="command" data-item="avatar-body" data-type="option" data-avatar-body="M">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M12.1888 7L12.1909 5L19.1909 5.00746L19.1834 12.0075L17.1834 12.0053L17.1873 8.41678L14.143 11.4611C15.4612 13.4063 15.2587 16.0743 13.5355 17.7975C11.5829 19.7501 8.41709 19.7501 6.46447 17.7975C4.51184 15.8449 4.51184 12.6791 6.46447 10.7264C8.16216 9.02873 10.777 8.80709 12.7141 10.0615L15.7718 7.00382L12.1888 7ZM7.87868 12.1406C9.05025 10.9691 10.9497 10.9691 12.1213 12.1406C13.2929 13.3122 13.2929 15.2117 12.1213 16.3833C10.9497 17.5549 9.05025 17.5549 7.87868 16.3833C6.70711 15.2117 6.70711 13.3122 7.87868 12.1406Z"
                    fill="currentColor" />
                </svg>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Emotion"></div>
            <div class="rowWrap">
              <div class="command" data-i18n-text="Neutral" data-mood="neutral">Perus</div>
              <div class="command" data-i18n-text="Happy" data-mood="happy">Ilo</div>
              <div class="command" data-i18n-text="Angry" data-mood="angry">Viha</div>
              <div class="command" data-i18n-text="Sad" data-mood="sad">Suru</div>
              <div class="command" data-i18n-text="Fear" data-mood="fear">Pelko</div>
              <div class="command" data-i18n-text="Disgust" data-mood="disgust">Inho</div>
              <div class="command" data-i18n-text="Love" data-mood="love">Rakkaus</div>
              <div class="command" data-i18n-text="Sleep" data-mood="sleep">Uni</div>
            </div>
          </div>

          <div class="row">
            <div class="text label" data-i18n-text="Pose"></div>
            <div id="poses" class="rowWrap">
              <div id="pose-repeat" class="command selected">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18.3701 7.99993L13.8701 10.598V8.99993H6.88989V12.9999H4.88989V6.99993H13.8701V5.40186L18.3701 7.99993Z"
                    fill="currentColor" />
                  <path
                    d="M10.1299 16.9999H19.1101V10.9999H17.1101V14.9999H10.1299V13.4019L5.62988 15.9999L10.1299 18.598V16.9999Z"
                    fill="currentColor" />
                </svg>
              </div>
              <div class="command" data-pose="FILE">
                <svg viewBox="-2 -2 28 28" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M4 1.5C2.89543 1.5 2 2.39543 2 3.5V4.5C2 4.55666 2.00236 4.61278 2.00698 4.66825C0.838141 5.07811 0 6.19118 0 7.5V19.5C0 21.1569 1.34315 22.5 3 22.5H21C22.6569 22.5 24 21.1569 24 19.5V7.5C24 5.84315 22.6569 4.5 21 4.5H11.874C11.4299 2.77477 9.86384 1.5 8 1.5H4ZM9.73244 4.5C9.38663 3.9022 8.74028 3.5 8 3.5H4V4.5H9.73244ZM3 6.5C2.44772 6.5 2 6.94772 2 7.5V19.5C2 20.0523 2.44772 20.5 3 20.5H21C21.5523 20.5 22 20.0523 22 19.5V7.5C22 6.94772 21.5523 6.5 21 6.5H3Z"
                    fill="currentColor" />
                </svg>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="text label" data-i18n-text="Action"></div>
            <div id="animations" class="rowWrap">
              <div id="animation-repeat" class="command selected">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18.3701 7.99993L13.8701 10.598V8.99993H6.88989V12.9999H4.88989V6.99993H13.8701V5.40186L18.3701 7.99993Z"
                    fill="currentColor" />
                  <path
                    d="M10.1299 16.9999H19.1101V10.9999H17.1101V14.9999H10.1299V13.4019L5.62988 15.9999L10.1299 18.598V16.9999Z"
                    fill="currentColor" />
                </svg>
              </div>
              <div class="command" data-animation="FILE">
                <svg viewBox="-2 -2 28 28" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M4 1.5C2.89543 1.5 2 2.39543 2 3.5V4.5C2 4.55666 2.00236 4.61278 2.00698 4.66825C0.838141 5.07811 0 6.19118 0 7.5V19.5C0 21.1569 1.34315 22.5 3 22.5H21C22.6569 22.5 24 21.1569 24 19.5V7.5C24 5.84315 22.6569 4.5 21 4.5H11.874C11.4299 2.77477 9.86384 1.5 8 1.5H4ZM9.73244 4.5C9.38663 3.9022 8.74028 3.5 8 3.5H4V4.5H9.73244ZM3 6.5C2.44772 6.5 2 6.94772 2 7.5V19.5C2 20.0523 2.44772 20.5 3 20.5H21C21.5523 20.5 22 20.0523 22 19.5V7.5C22 6.94772 21.5523 6.5 21 6.5H3Z"
                    fill="currentColor" />
                </svg>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Adjust"></div>
            <div class="column">
              <div class="row">
                <div class="command" data-target="avatar-brightness" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"
                      fill="currentColor" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M11 0H13V4.06189C12.6724 4.02104 12.3387 4 12 4C11.6613 4 11.3276 4.02104 11 4.06189V0ZM7.0943 5.68018L4.22173 2.80761L2.80752 4.22183L5.6801 7.09441C6.09071 6.56618 6.56608 6.0908 7.0943 5.68018ZM4.06189 11H0V13H4.06189C4.02104 12.6724 4 12.3387 4 12C4 11.6613 4.02104 11.3276 4.06189 11ZM5.6801 16.9056L2.80751 19.7782L4.22173 21.1924L7.0943 18.3198C6.56608 17.9092 6.09071 17.4338 5.6801 16.9056ZM11 19.9381V24H13V19.9381C12.6724 19.979 12.3387 20 12 20C11.6613 20 11.3276 19.979 11 19.9381ZM16.9056 18.3199L19.7781 21.1924L21.1923 19.7782L18.3198 16.9057C17.9092 17.4339 17.4338 17.9093 16.9056 18.3199ZM19.9381 13H24V11H19.9381C19.979 11.3276 20 11.6613 20 12C20 12.3387 19.979 12.6724 19.9381 13ZM18.3198 7.0943L21.1923 4.22183L19.7781 2.80762L16.9056 5.6801C17.4338 6.09071 17.9092 6.56608 18.3198 7.0943Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="2" step="0.05" value="1" data-item="avatar-brightness"
                  data-type="value" data-range="percentage" data-avatar-brightness="brightness">
                <div class="text">100%</div>
              </div>
              <div class="row">
                <div class="command" data-target="avatar-contrast" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M12 18C10.4633 18 9.06151 17.4223 8 16.4722C6.7725 15.3736 6 13.777 6 12C6 10.223 6.7725 8.62643 8 7.52779C9.06151 6.57771 10.4633 6 12 6V18Z"
                      fill="currentColor" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="2" step="0.05" value="1" data-item="avatar-contrast" data-type="value"
                  data-range="percentage" data-avatar-contrast="contrast">
                <div class="text">100%</div>
              </div>
              <div class="row">
                <div class="command" data-target="avatar-saturate" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M8.20348 2.00378C9.46407 2.00378 10.5067 3.10742 10.6786 4.54241L19.1622 13.0259L11.384 20.8041C10.2124 21.9757 8.31291 21.9757 7.14134 20.8041L2.8987 16.5615C1.72713 15.3899 1.72713 13.4904 2.8987 12.3188L5.70348 9.51404V4.96099C5.70348 3.32777 6.82277 2.00378 8.20348 2.00378ZM8.70348 4.96099V6.51404L7.70348 7.51404V4.96099C7.70348 4.63435 7.92734 4.36955 8.20348 4.36955C8.47963 4.36955 8.70348 4.63435 8.70348 4.96099ZM8.70348 10.8754V9.34247L4.31291 13.733C3.92239 14.1236 3.92239 14.7567 4.31291 15.1473L8.55555 19.3899C8.94608 19.7804 9.57924 19.7804 9.96977 19.3899L16.3337 13.0259L10.7035 7.39569V10.8754C10.7035 10.9184 10.7027 10.9612 10.7012 11.0038H8.69168C8.69941 10.9625 8.70348 10.9195 8.70348 10.8754Z"
                      fill="currentColor" />
                    <path
                      d="M16.8586 16.8749C15.687 18.0465 15.687 19.946 16.8586 21.1175C18.0302 22.2891 19.9297 22.2891 21.1013 21.1175C22.2728 19.946 22.2728 18.0465 21.1013 16.8749L18.9799 14.7536L16.8586 16.8749Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="2" step="0.05" value="1" data-item="avatar-saturate" data-type="value"
                  data-range="percentage" data-avatar-saturate="saturate">
                <div class="text">100%</div>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Emoji"></div>
            <div id="emojis" class="rowWrap">
            </div>
          </div>

          <div class="row">
            <div class="text label" data-i18n-text="Morphs"></div>
            <div id="morphs" class="column"></div>
          </div>

          <div class="row">
            <div class="text label" data-i18n-text="Data"></div>
            <textarea id="morphdata" rows="1"></textarea>
          </div>

        </div>

        <div id="right-camera" class="page noselect nodrag hidden">

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Director"></div>
            <div class="rowWrap">
              <div id="pause" class="command" data-i18n-text="Pause"></div>
              <div id="autorotate" class="command" data-i18n-text="Panning"></div>
              <div id="slowdown" class="command" data-i18n-text="Slow-motion"></div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Framing"></div>
            <div class="column">
              <div class="rowWrap">
                <div class="command" data-i18n-text="Full" data-item="camera-frame" data-type="option"
                  data-camera-frame="full"></div>
                <div class="command selected" data-i18n-text="Upper" data-item="camera-frame" data-type="option"
                  data-camera-frame="upper"></div>
                <div class="command" data-i18n-text="Head" data-item="camera-frame" data-type="option"
                  data-camera-frame="head"></div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="text label" data-i18n-text="Adjust"></div>
            <div class="column">
              <div class="row">
                <div class="command" data-target="camera-x" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 7H11V17H13V7Z" fill="currentColor" />
                    <path
                      d="M5.99996 7.75732L7.41418 9.17154L5.58572 11L9.99996 11V13L5.58579 13L7.41418 14.8284L5.99996 16.2426L1.75732 12L5.99996 7.75732Z"
                      fill="currentColor" />
                    <path
                      d="M18 16.2427L16.5858 14.8285L18.4143 13H14V11L18.4142 11L16.5858 9.17161L18 7.75739L22.2427 12L18 16.2427Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="-1" max="1" step="0.01" value="0" data-item="camera-x" data-type="value"
                  data-range="meter" data-camera-x="x">
                <div class="text">0 m</div>
              </div>
              <div class="row">
                <div class="command" data-target="camera-y" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 11L7 13H17V11H7Z" fill="currentColor" />
                    <path
                      d="M7.75732 18L9.17154 16.5858L11 18.4143V14H13V18.4142L14.8284 16.5858L16.2426 18L12 22.2427L7.75732 18Z"
                      fill="currentColor" />
                    <path
                      d="M16.2427 5.99996L14.8285 7.41418L13 5.58572V9.99996H11L11 5.58579L9.17161 7.41418L7.75739 5.99996L12 1.75732L16.2427 5.99996Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="-1" max="1" step="0.01" value="0" data-item="camera-y" data-type="value"
                  data-range="meter" data-camera-y="y">
                <div class="text">0 m</div>
              </div>
              <div class="row">
                <div class="command" data-target="camera-d" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 3H9V5H5V9H3V3Z" fill="currentColor" />
                    <path d="M3 21H9V19H5V15H3V21Z" fill="currentColor" />
                    <path d="M15 21H21V15H19V19H15V21Z" fill="currentColor" />
                    <path d="M21 3H15V5H19V9H21V3Z" fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="-10" max="10" step="0.1" value="0" data-item="camera-d" data-type="value"
                  data-range="meter" data-camera-d="d">
                <div class="text">0 m</div>
              </div>
              <div class="row">
                <div class="command" data-target="camera-rotx" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="scale(0.7 1.2)">
                    <path
                      d="M5.33929 4.46777H7.33929V7.02487C8.52931 6.08978 10.0299 5.53207 11.6607 5.53207C15.5267 5.53207 18.6607 8.66608 18.6607 12.5321C18.6607 16.3981 15.5267 19.5321 11.6607 19.5321C9.51025 19.5321 7.58625 18.5623 6.30219 17.0363L7.92151 15.8515C8.83741 16.8825 10.1732 17.5321 11.6607 17.5321C14.4222 17.5321 16.6607 15.2935 16.6607 12.5321C16.6607 9.77065 14.4222 7.53207 11.6607 7.53207C10.5739 7.53207 9.56805 7.87884 8.74779 8.46777L11.3393 8.46777V10.4678H5.33929V4.46777Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="-0.5" max="0.5" step="0.1" value="0" data-item="camera-rotx" data-type="value"
                  data-range="radian" data-camera-rotx="rotx">
                <div class="text">0 rad</div>
              </div>
              <div class="row">
                <div class="command" data-target="camera-roty" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="scale(1.2 0.7)">
                    <path
                      d="M13.1459 11.0499L12.9716 9.05752L15.3462 8.84977C14.4471 7.98322 13.2242 7.4503 11.8769 7.4503C9.11547 7.4503 6.87689 9.68888 6.87689 12.4503C6.87689 15.2117 9.11547 17.4503 11.8769 17.4503C13.6977 17.4503 15.2911 16.4771 16.1654 15.0224L18.1682 15.5231C17.0301 17.8487 14.6405 19.4503 11.8769 19.4503C8.0109 19.4503 4.87689 16.3163 4.87689 12.4503C4.87689 8.58431 8.0109 5.4503 11.8769 5.4503C13.8233 5.4503 15.5842 6.24474 16.853 7.52706L16.6078 4.72412L18.6002 4.5498L19.1231 10.527L13.1459 11.0499Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="-3.2" max="3.2" step="0.1" value="0" data-item="camera-roty" data-type="value"
                  data-range="radian" data-camera-roty="roty">
                <div class="text">0 rad</div>
              </div>
            </div>
          </div>

        </div>

        <div id="right-audio" class="page noselect nodrag hidden">

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Ambience"></div>
            <div class="column">
              <div id="music" class="rowWrap">
                <div class="command" data-voice-background="FILE">
                  <svg viewBox="-2 -2 28 28" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M4 1.5C2.89543 1.5 2 2.39543 2 3.5V4.5C2 4.55666 2.00236 4.61278 2.00698 4.66825C0.838141 5.07811 0 6.19118 0 7.5V19.5C0 21.1569 1.34315 22.5 3 22.5H21C22.6569 22.5 24 21.1569 24 19.5V7.5C24 5.84315 22.6569 4.5 21 4.5H11.874C11.4299 2.77477 9.86384 1.5 8 1.5H4ZM9.73244 4.5C9.38663 3.9022 8.74028 3.5 8 3.5H4V4.5H9.73244ZM3 6.5C2.44772 6.5 2 6.94772 2 7.5V19.5C2 20.0523 2.44772 20.5 3 20.5H21C21.5523 20.5 22 20.0523 22 19.5V7.5C22 6.94772 21.5523 6.5 21 6.5H3Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <div class="command selected" data-i18n-text="Silence" data-item="voice-background" data-type="option"
                  data-voice-background="NONE"></div>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Speech"></div>
            <div class="column">
              <div class="rowWrap">
                <div class="command selected" data-item="voice-type" data-type="option" data-voice-type="google">Google
                </div>
                <div class="command" data-item="voice-type" data-type="option" data-voice-type="microsoft">Microsoft
                </div>
                <div class="command" data-item="voice-type" data-type="option" data-voice-type="eleven">ElevenLabs</div>
              </div>
            </div>
          </div>
          <div id="voice-google" class="row">
            <div class="text label"></div>
            <div class="column">
              <div id="googlevoices" class="rowWrap">
              </div>
              <div class="row">
                <div class="command" data-target="voice-google-rate" data-range-reset="1">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 7H11V17H13V7Z" fill="currentColor" />
                    <path
                      d="M5.99996 7.75732L7.41418 9.17154L5.58572 11L9.99996 11V13L5.58579 13L7.41418 14.8284L5.99996 16.2426L1.75732 12L5.99996 7.75732Z"
                      fill="currentColor" />
                    <path
                      d="M18 16.2427L16.5858 14.8285L18.4143 13H14V11L18.4142 11L16.5858 9.17161L18 7.75739L22.2427 12L18 16.2427Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0.3" max="4" step="0.1" value="1" data-item="voice-google-rate"
                  data-type="value" data-range="float" data-voice-google-rate="rate">
                <div class="text">0</div>
              </div>
              <div class="row">
                <div class="command" data-target="voice-google-pitch" data-range-reset="0">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 11L7 13H17V11H7Z" fill="currentColor" />
                    <path
                      d="M7.75732 18L9.17154 16.5858L11 18.4143V14H13V18.4142L14.8284 16.5858L16.2426 18L12 22.2427L7.75732 18Z"
                      fill="currentColor" />
                    <path
                      d="M16.2427 5.99996L14.8285 7.41418L13 5.58572V9.99996H11L11 5.58579L9.17161 7.41418L7.75739 5.99996L12 1.75732L16.2427 5.99996Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="-20" max="20" step="1" value="0" data-item="voice-google-pitch"
                  data-type="value" data-range="float" data-voice-google-pitch="pitch">
                <div class="text">0</div>
              </div>
            </div>
          </div>
          <div id="voice-microsoft" class="row">
            <div class="text label"></div>
            <div class="column">
              <div id="microsoftvoices" class="rowWrap">
              </div>
            </div>
          </div>
          <div id="voice-eleven" class="row">
            <div class="text label"></div>
            <div class="column">
              <div id="elevenvoices" class="rowWrap">
              </div>
            </div>
          </div>
          <div id="lipsync" class="row">
            <div class="text label" data-i18n-text="Lip-sync"></div>
            <div class="column">
              <div class="rowWrap">
                <div class="command selected" data-i18n-text="en" data-item="voice-lipsync-lang" data-type="option"
                  data-voice-lipsync-lang="en"></div>
                <div class="command" data-i18n-text="fi" data-item="voice-lipsync-lang" data-type="option"
                  data-voice-lipsync-lang="fi"></div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="text label" data-i18n-text="voice-test"></div>
            <div id="playtest" class="command">
              <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23Z"
                  fill="currentColor" />
                <path d="M16 12L10 16.3301V7.66987L16 12Z" fill="currentColor" />
              </svg>
            </div>
            <textarea placeholder="Kirjoita tähän testilause." rows="1" autocapitalize="sentences"
              data-item="voice-test" data-type="value" data-voice-test=""></textarea>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Mixer"></div>
            <div class="column">
              <div class="row">
                <div class="command" data-target="voice-mixerbg" data-range-reset="0.5">
                  <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M12 8.95439L17.6352 7.82736C19.0102 7.55235 20 6.34501 20 4.94274C20 3.08637 18.3017 1.69406 16.4813 2.05813L12.4117 2.87206C11.0094 3.15252 10 4.38376 10 5.8138V13.8895C9.41165 13.5492 8.72857 13.3544 8 13.3544C5.79086 13.3544 4 15.1453 4 17.3544C4 19.5635 5.79086 21.3544 8 21.3544C10.2091 21.3544 12 19.5635 12 17.3544V8.95439ZM16.8736 4.01929L12.8039 4.83322C12.3365 4.92671 12 5.33712 12 5.8138V6.91479L17.2429 5.8662C17.6831 5.77816 18 5.39165 18 4.94274C18 4.34846 17.4563 3.90274 16.8736 4.01929ZM10 17.3544C10 16.2498 9.10457 15.3544 8 15.3544C6.89543 15.3544 6 16.2498 6 17.3544C6 18.459 6.89543 19.3544 8 19.3544C9.10457 19.3544 10 18.459 10 17.3544Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="1" step="0.01" value="0.5" data-item="voice-mixerbg" data-type="value"
                  data-range="float" data-voice-mixerbg="">
                <div class="text">0.5</div>
              </div>
              <div class="row">
                <div class="command" data-target="voice-mixerspeech" data-range-reset="1">
                  <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7Z"
                      fill="currentColor" />
                    <path
                      d="M16 15C16 14.4477 15.5523 14 15 14H9C8.44772 14 8 14.4477 8 15V21H6V15C6 13.3431 7.34315 12 9 12H15C16.6569 12 18 13.3431 18 15V21H16V15Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <input type="range" min="0" max="1" step="0.01" value="1" data-item="voice-mixerspeech"
                  data-type="value" data-range="float" data-voice-mixerspeech="">
                <div class="text">1</div>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Space"></div>
            <div class="column">
              <div id="impulses" class="rowWrap">
                <div class="command selected" data-i18n-text="Dry" data-item="voice-reverb" data-type="option"
                  data-voice-reverb="NONE"></div>
              </div>
            </div>
          </div>

        </div>

        <div id="right-sessions" class="page">
          <div id="sessions">
            <div id="session-0" class="session selected"></div>
            <div id="session-1" class="session"></div>
          </div>
        </div>

        <div id="right-session" class="page noselect nodrag hidden">

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Session"></div>
            <div id="directory" class="column fill">
              <div id="entry-0" class="entry row">
                <div class="command fill selected" data-session="0">Nimet&ouml;n</div>
                <div class="command" data-entry-move="up">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M17.6569 16.2427L19.0711 14.8285L12.0001 7.75739L4.92896 14.8285L6.34317 16.2427L12.0001 10.5858L17.6569 16.2427Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <div class="command" data-entry-move="down">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M6.34317 7.75732L4.92896 9.17154L12 16.2426L19.0711 9.17157L17.6569 7.75735L12 13.4142L6.34317 7.75732Z"
                      fill="currentColor" />
                  </svg>
                </div>
              </div>
              <div id="entry-1" class="entry row">
                <div class="command fill" data-session="1">Nimet&ouml;n</div>
                <div class="command" data-entry-move="up">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M17.6569 16.2427L19.0711 14.8285L12.0001 7.75739L4.92896 14.8285L6.34317 16.2427L12.0001 10.5858L17.6569 16.2427Z"
                      fill="currentColor" />
                  </svg>
                </div>
                <div class="command" data-entry-move="down">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M6.34317 7.75732L4.92896 9.17154L12 16.2426L19.0711 9.17157L17.6569 7.75735L12 13.4142L6.34317 7.75732Z"
                      fill="currentColor" />
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="Title"></div>
            <input class="fill" type="text" data-i18n-placeholder="Name" data-item="name" data-type="value">
            <div id="session-duplicate" class="command">
              <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 5H7V3H21V17H19V5Z" fill="currentColor" />
                <path d="M9 13V11H11V13H13V15H11V17H9V15H7V13H9Z" fill="currentColor" />
                <path fill-rule="evenodd" clip-rule="evenodd" d="M3 7H17V21H3V7ZM5 9H15V19H5V9Z" fill="currentColor" />
              </svg>
            </div>
            <div id="session-delete" class="command">
              <svg viewBox="-1 -1 26 26" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M17 5V4C17 2.89543 16.1046 2 15 2H9C7.89543 2 7 2.89543 7 4V5H4C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H5V18C5 19.6569 6.34315 21 8 21H16C17.6569 21 19 19.6569 19 18V7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H17ZM15 4H9V5H15V4ZM17 7H7V18C7 18.5523 7.44772 19 8 19H16C16.5523 19 17 18.5523 17 18V7Z"
                  fill="currentColor" />
                <path d="M9 9H11V17H9V9Z" fill="currentColor" />
                <path d="M13 9H15V17H13V9Z" fill="currentColor" />
              </svg>
            </div>
          </div>

          <div class="row">
            <div class="text label" data-i18n-text="Theme"></div>
            <div class="column">
              <div id="languages" class="rowWrap">
              </div>
              <div class="rowWrap">
                <div class="command selected" data-i18n-text="Dark" data-item="theme-brightness" data-type="option"
                  data-theme-brightness="dark"></div>
                <div class="command" data-i18n-text="Light" data-item="theme-brightness" data-type="option"
                  data-theme-brightness="light"></div>
              </div>
              <div class="rowWrap">
                <div class="command selected" data-i18n-text="theme-wide" data-item="theme-ratio" data-type="option"
                  data-theme-ratio="wide"></div>
                <div class="command" data-i18n-text="theme-43" data-item="theme-ratio" data-type="option"
                  data-theme-ratio="normal"></div>
              </div>
              <div class="rowWrap">
                <div class="command selected" data-i18n-text="theme-landscape" data-item="theme-layout"
                  data-type="option" data-theme-layout="land"></div>
                <div class="command" data-i18n-text="theme-portrait" data-item="theme-layout" data-type="option"
                  data-theme-layout="port"></div>
              </div>
            </div>
          </div>

          <div class="vbar"></div>

          <div class="row">
            <div class="text label" data-i18n-text="JSON"></div>
            <input id="json" type="text" placeholder="JSON">
          </div>

        </div>

      </div>

      <div class="border starttransparent"></div>
    </div>


    <div id="bottom">
      <div class="pages noselect nodrag">
        <!-- ______________________________________________________________input -->
        <div class="page fill">
          <div class="row fill">
            <textarea id="input" class="starttransparent" data-i18n-placeholder="input"
              autocapitalize="sentences"></textarea>
          </div>
        </div>



        <div class="row" style="column-gap:0;">
          <div id="selectall" class="command starttransparent">
            <!-- <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> -->
            <path
              d="M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z"
              fill="currentColor" />
            </svg>
          </div>
          <div id="flag" class="command starttransparent">
            <!-- <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"> -->
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M7 8V13C7 15.7614 9.23858 18 12 18C14.7614 18 17 15.7614 17 13V8H7ZM5 4H19V13C19 16.866 15.866 20 12 20C8.13401 20 5 16.866 5 13V4Z"
              fill="currentColor" />
            </svg>
          </div>

          <div id="copy" class="command starttransparent">
            <!-- <svg viewBox="-2 -2 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"> -->
            <path d="M13 7H7V5H13V7Z" fill="currentColor" />
            <path d="M13 11H7V9H13V11Z" fill="currentColor" />
            <path d="M7 15H13V13H7V15Z" fill="currentColor" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M3 19V1H17V5H21V23H7V19H3ZM15 17V3H5V17H15ZM17 7V19H9V21H19V7H17Z" fill="currentColor" />
            </svg>
          </div>
          <div id="delete" class="command starttransparent">
            <!-- <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> -->
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M17 5V4C17 2.89543 16.1046 2 15 2H9C7.89543 2 7 2.89543 7 4V5H4C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H5V18C5 19.6569 6.34315 21 8 21H16C17.6569 21 19 19.6569 19 18V7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H17ZM15 4H9V5H15V4ZM17 7H7V18C7 18.5523 7.44772 19 8 19H16C16.5523 19 17 18.5523 17 18V7Z"
              fill="currentColor" />
            <path d="M9 9H11V17H9V9Z" fill="currentColor" />
            <path d="M13 9H15V17H13V9Z" fill="currentColor" />
            </svg>
          </div>
        </div>
      </div>

      <div class="border starttransparent"></div>

    </div>




    <script>
      document.addEventListener("DOMContentLoaded", () => {
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;
        let recordedAudioBlobs = [];

        const startRecording = async () => {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);

            mediaRecorder.ondataavailable = (event) => {
              if (event.data.size > 0) {
                audioChunks.push(event.data);
              }
            };

            mediaRecorder.onstop = () => {
              const audioBlob = new Blob(audioChunks, { type: "audio/mp3" });
              recordedAudioBlobs.push(audioBlob);
              audioChunks = []; // Clear the chunks for the next recording session

              console.log("Recording stopped");
              if (isRecording) {
                startRecording();
              } else {
                postAudioToAPI();
              }
            };

            mediaRecorder.start();
            console.log("Recording started");
            isRecording = true;
            startRecordingButton.innerText = "Stop Recording";
          } catch (error) {
            console.error("Error accessing microphone:", error);
          }
        };

        const stopRecording = () => {
          if (mediaRecorder && mediaRecorder.state === "recording") {
            mediaRecorder.stop();
            console.log("Recording stopped");
          }
        };

        const postAudioToAPI = async () => {
          try {
            // Concatenate all recorded audio blobs into a single blob
            const concatenatedBlob = new Blob(recordedAudioBlobs, { type: "audio/mp3" });
            await getTextAPI(concatenatedBlob, 'combined_recording.mp3');

            // Clear the array of recorded audio blobs for the next recording
            recordedAudioBlobs = [];
          } catch (error) {
            console.error("Error posting audio to API:", error);
          }
        };

        const getTextAPI = async (fileInput, filename) => {
          const form = new FormData();
          form.append('audio', fileInput, filename);

          const requestOptions = {
            method: "POST",
            body: form,
            redirect: "follow",
          };

          console.log("Sending audio to API...");

          try {
            // const response = await fetch("https://25da-34-131-147-151.ngrok-free.app/transcribe", requestOptions);
            //In ths part make make a flask API then do modification in it

            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const result = await response.json();
            console.log("API response:", result);

            const transcription = result.response || result.transcription || 'Unable to get transcription';

            const textarea = document.getElementById("input");//
            textarea.value = transcription;

            head.speakText(transcription, {
              lipsyncLang: cfg('voice-lipsync-lang'),
              ttsVoice: cfg('voice-google-id'),
              ttsRate: cfg('voice-google-rate'),
              ttsPitch: cfg('voice-google-pitch')
            }, function () {
              console.log("Avatar speaking:", transcription);
            });
          } catch (error) {
            console.error("Error:", error);
          }
        };

        const startRecordingButton = document.getElementById("startRecording");
        startRecordingButton.addEventListener("click", () => {
          if (isRecording) {
            stopRecording();
            isRecording = false;
          } else {
            startRecording();
          }
        });
      });
    </script>


    <div id="sidebar">
      <div style="text-align: center;">
        <span id="responseStatus" style="position: absolute; top: 3%; transform: translateX(-50%);"></span>
      </div>
      <ul style="list-style: none; padding: 0;">
        <li>
          <button id="change"
            style="width: 100%; padding: 15px 10px ; margin-bottom: 10px;  border: none; background-color: #f8f9fa; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,.1);">
            Change Avatar
          </button>
        </li>
        <li>
          <button id="changePersonality"
            style="width: 100%; padding: 15px 10px; margin-bottom: 10px; border: none; background-color: #f8f9fa; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,.1);">
            Change Personality
          </button>
          <div id="personalityInput" class="input-group" style="display: none;">
            <textarea id="personalityText" placeholder="Enter personality details..." style="resize: none;"></textarea>
            <button onclick="showNext('personalityInput', 'backstoryInput')">Next</button>
          </div>
        </li>
        <li>
          <button id="backStory"
            style="width: 100%; padding: 15px 10px; margin-bottom: 10px; border: none; background-color: #f8f9fa; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,.1);">
            Change Back Story
          </button>
          <div id="backstoryInput" class="input-group" style="display: none;">
            <textarea id="backstoryText" placeholder="Enter backstory details..." style="resize: none;"></textarea>
            <button onclick="showNext('backstoryInput', 'knowledgeBaseInput')">Next</button>
          </div>
        </li>
        <li>
          <button id="knowledgeBase"
            style="width: 100%; padding: 15px 10px; margin-bottom: 10px; border: none; background-color: #f8f9fa; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,.1);">
            Change Knowledge Base
          </button>
          <div id="knowledgeBaseInput" class="input-group" style="display: none;">
            <textarea id="knowledgeText" placeholder="Enter knowledge base details..." style="resize: none;"></textarea>
            <button onclick="saveText()">Save</button>
          </div>
        </li>
      </ul>

    </div>



    <script>
      let isRecording = false;
      let mediaRecorder;
      let audioChunks = [];

      async function toggleRecording() {
        if (!isRecording) {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          mediaRecorder = new MediaRecorder(stream);

          mediaRecorder.ondataavailable = (event) => {
            if (event.data.size > 0) {
              audioChunks.push(event.data);
            }
          };

          mediaRecorder.onstop = async () => {
            document.getElementById('admin-mic-container').classList.remove('recording');
            const audioBlob = new Blob(audioChunks, { type: 'audio/mp3' });
            const formData = new FormData();
            formData.append('audio', audioBlob, 'recording.mp3');

            const requestOptions = {
              method: "POST",
              body: formData,
              redirect: "follow",
            };

            try {
              const response = await fetch("https://84dd-34-131-147-151.ngrok-free.app/transcribe", requestOptions);

              if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
              }

              const result = await response.json();
              console.log("API response:", result);

              const transcription = result.response

              const textarea = document.getElementById("input");//

              // textarea.value = transcription;

              head.speakText(transcription, {
                lipsyncLang: cfg('voice-lipsync-lang'),
                ttsVoice: cfg('voice-google-id'),
                ttsRate: cfg('voice-google-rate'),
                ttsPitch: cfg('voice-google-pitch')
              }, textarea.value = transcription);

            } catch (error) {
              console.error("Error:", error);
            }
            // Reset recording-related variables
            isRecording = false;
            audioChunks = [];
            document.getElementById('admin-mic-container').classList.remove('recording');
          };

          mediaRecorder.start();
          isRecording = true;
          document.getElementById('admin-mic-container').classList.add('recording');
        } else {
          mediaRecorder.stop();
        }
      }




      let details = {
        personality: "",
        backStory: "",
        knowledge: "",
      };

      document.addEventListener('DOMContentLoaded', function () {
        personalityText.value = details.personality;
        backstoryText.value = details.backStory;
        knowledgeText.value = details.knowledge;
      });

      function showNext(currentId, nextId) {
        var currentInput = document.getElementById(currentId);
        if (currentInput) {
          currentInput.style.display = 'none';
        }
        var nextInput = document.getElementById(nextId);
        if (nextInput) {
          nextInput.style.display = 'block';
        }
      }

      async function saveText() {
        const personalityText = document.getElementById('personalityText').value;
        const backstoryText = document.getElementById('backstoryText').value;
        const knowledgeText = document.getElementById('knowledgeText').value;

        const combinedText = `${personalityText} ${backstoryText} ${knowledgeText}`;
        const timeStamp = Date.now()
        const textBlob = new Blob([combinedText], { type: "text/plain" });
        const formData = new FormData();
        formData.append("text_file", textBlob, `${timeStamp}`.txt);

        try {
          // const response = await fetch("https://0b55-34-131-147-151.ngrok-free.app/update_paragraph", {
          //   method: "POST",
          //   body: formData,
          // }) 
          // make your own flask API above is closed by me 
          console.log(response)
          const responseStatus = document.getElementById("responseStatus")
          if (response.ok) {
            responseStatus.innerText = "Successfully Updated"
            responseStatus.style.color = "green"

          } else {
            responseStatus.innerText = "Network Error"
            responseStatus.style.color = "red"
          }
          setTimeout(function () {
            responseStatus.innerHTML = '';
          }, 5000);

        } catch (error) {
          console.error("Error:", error.message);
        }

        document.getElementById('knowledgeBaseInput').style.display = 'none';
      }

      document.getElementById('changePersonality').addEventListener('click', function () {
        showNext(null, 'personalityInput');
      });

      document.getElementById('backStory').addEventListener('click', function () {
        showNext(null, 'backstoryInput');
      });

      document.getElementById('knowledgeBase').addEventListener('click', function () {
        showNext(null, 'knowledgeBaseInput');
      });

      // check login state after login
      function checkLoginState() {
        let userId = getCookie('userId');
        let userName = getUserName(userId).toUpperCase();
        let userRole = getUserRole(userId);

        if (userId && userName && userRole === "admin") {
          document.getElementById('navUsername').innerText = `Welcome, ${userName}!`;
        }
        else {
          window.location.href = './index.html';
        }
      }

      function getUserName(userId) {
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let user = users.find(u => u.email === userId);
        return user ? user.name : '';
      }
      function getUserRole(userId) {
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let user = users.find(u => u.email === userId);
        return user ? user.role : '';
      }

      function getCookie(name) {
        let cookies = document.cookie.split('; ');
        for (let i = 0; i < cookies.length; i++) {
          let cookie = cookies[i].split('=');
          if (cookie[0] === name) {
            return cookie[1];
          }
        }
        return null;
      }

      // logout handler starts here
      function handleLogout() {
        document.cookie = 'userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=None; Secure';
        window.location.href = './index.html';
      }
      //logout handler ends here

    </script>



</body>

</html>